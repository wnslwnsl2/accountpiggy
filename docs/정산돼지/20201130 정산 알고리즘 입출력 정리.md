# 정산 알고리즘 정리



정산에 필요한 데이터

- id list
  - 받아야하는 금액별로 id_list를 재배열 하는데 필요하다.
  - 매트릭스를 만들 때, log에 들어가는 쓴 사람, 참가한 사람의 list_idx를 찾는데 필요하다.
- log : 메트릭스를 만들어야 한다.



원하는 출력

- user 별 balance_result
  - 보내야 하는 목록
  - 받아야 하는 목록
  - self_expense
  - real_expense
  - total_expense

balance_results [] < dict id 접근으로 하면 되지

```
for user, before_sending_items, recving_items, self_expense, ------- in  balance_results:
```





# 정산 정보 페이지



내가 알아야할 정보

- 내가 누구한테 얼마를 보내야 하는지

  

이게 맞나에 대한 검증

#### 초기

여행 경비 = 내가 사용한 금액 - 내가 받아야할 금액 + 내가 보낼 금액

- 내가 사용한 금액
- 받아야할 금액

- 내가 보낼 금액

#### 정산 후

여행 경비 = 내가 사용한 금액 - 내가 받아야할 금액 + 내가 보낼 금액

- 내가 사용한 금액
- 받아야할 금액

- 내가 보낼 금액





### 정산 타이밍

1) 데이터가 입력 될 때마다

- 데이터가 삭제된다면? > 처리가 귀찮아

2) 사용자가 정산 페이지에 들어갔을 때, 현재 마지막 정산 후 데이터의 수정이 있는지 없는지에 따라

- 아주 깔끔해



자 그럼 연동을 시켜보자

- 결과는 matrix로 받을 꺼야